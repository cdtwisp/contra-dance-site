<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location & Directions – Twisp Contra Dance</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <style>
        body {font-family:'Georgia',serif;margin:0;padding:0;background:#f5f1e9;color:#1a1a1a;text-align:center;}
        header {background:#1a1a1a;color:#f5f1e9;padding:20px;border-bottom:10px solid #4a2c2a;width:100%;}
        header h1 {margin:0;font-size:2.5em;font-weight:bold;text-transform:uppercase;letter-spacing:2px;}
        .menu-bar {background:#1a1a1a;padding:10px 0;border-bottom:2px solid #4a2c2a;width:100%;}
        .menu-bar ul {list-style:none;padding:0;margin:0;display:flex;justify-content:center;gap:20px;}
        .menu-bar a {color:#f5f1e9;text-decoration:none;font-size:1.2em;padding:5px 15px;}
        .menu-bar a:hover {background:#2e1a18;border-radius:5px;}
        .location-page {max-width:900px;margin:40px auto;padding:20px;}
        .location-page h2 {color:#4a2c2a;font-size:2.2em;margin-bottom:20px;}
        .location-page h3 {color:#4a2c2a;font-size:1.8em;margin:20px 0 10px;}
        .location-page p {font-size:1.2em;margin:15px 0;}
        iframe {width:100%;height:550px;border:0;border-radius:8px;}
        .social-share {margin:40px 0;display:flex;justify-content:center;gap:15px;flex-wrap:wrap;}
        .social-share a {display:inline-flex;align-items:center;gap:8px;padding:10px 15px;background:#4a2c2a;color:#f5f1e9;text-decoration:none;border-radius:5px;font-size:1em;}
        .social-share a:hover {background:#2e1a18;}
        footer {background:#1a1a1a;color:#f5f1e9;padding:15px;margin-top:60px;}
        @media (max-width:768px) {
            iframe {height:400px;}
            .menu-bar ul {gap:10px;}
            .menu-bar a {font-size:1em;padding:5px 10px;}
            .social-share {flex-direction:column;align-items:center;}
            .social-share a {width:100%;max-width:280px;justify-content:center;}
        }
    </style>
</head>
<body>
    <header><h1>Location & Directions</h1></header>
    <nav class="menu-bar">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="calendar.html">Calendar</a></li>
            <li><a href="location.html">Location & Directions</a></li>
        </ul>
    </nav>
    <div class="location-page">
        <h2>Current Venue</h2>
        <h3 id="venue-name">Loading…</h3>
        <p id="venue-address">Loading…</p>
        <iframe id="venue-map" src="" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

        <p style="margin-top:40px;font-size:1.1em;line-height:1.6;">
            <strong>Parking:</strong> Plenty of parking<br>
            <strong>Entrance:</strong> Use the main entrance<br>
        </p>

        <div class="social-share">
            <a href="#" onclick="shareFacebook()">Share on Facebook</a>
            <a href="#" onclick="shareTwitter()">Share on X (Twitter)</a>
            <a href="#" onclick="shareInstagram()">Share on Instagram</a>
            <a href="#" onclick="shareTikTok()">Share on TikTok</a>
        </div>
    </div>
    <footer><p>More info: contradancetwisp@gmail.com</p></footer>

    <script>
        const venues = {
            "Methow Valley UMC Fellowship Hall, Twisp WA": {
                name: "Methow Valley UMC Fellowship Hall",
                address: "193B Old Twisp Hwy, Twisp, WA 98856",
                embed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2091.5998644124884!2d-120.15663!3d48.42277!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x549c9f0e5e5e5e5e%3A0x0!2sMethow%20Valley%20United%20Methodist%20Church%2C%20193B%20Old%20Twisp%20Hwy%2C%20Twisp%2C%20WA%2098856!5e1!3m2!1sen!2sus!4v1754508115294!5m2!1sen!2sus"
            },
            "Twisp Valley Grange, Twisp WA": {
                name: "Twisp Valley Grange",
                address: "344 W. 2nd Ave, Twisp, WA 98856",
                embed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2091.5998644124884!2d-120.1289970888383!3d48.36551137114978!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x549ca3ff3c2c51c5%3A0xd68aac688d7f0913!2sTwisp%20Valley%20Grange!5e1!3m2!1sen!2sus!4v1754508115294!5m2!1sen!2sus"
            }
        };

        async function updateLocation() {
            try {
                const response = await fetch('index.html');
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const subtitle = doc.querySelector('.event-subtitle')?.textContent.trim();
                const venue = venues[subtitle] || venues["Twisp Valley Grange, Twisp WA"];
                document.getElementById('venue-name').textContent = venue.name;
                document.getElementById('venue-address').textContent = venue.address;
                document.getElementById('venue-map').src = venue.embed;
            } catch (e) {
                const v = venues["Twisp Valley Grange, Twisp WA"];
                document.getElementById('venue-name').textContent = v.name;
                document.getElementById('venue-address').textContent = v.address;
                document.getElementById('venue-map').src = v.embed;
            }
        }
        updateLocation();

        // Social Sharing
        const shareText = "Unlock Twisp contra: Teaches per dance, free door. Show Saturdays & dance the night. ";
        const currentUrl = encodeURIComponent(window.location.href);
        function shareFacebook() { window.open(`https://www.facebook.com/sharer/sharer.php?u=${currentUrl}`,'_blank'); }
        function shareTwitter() { window.open(`https://twitter.com/intent/tweet?url=${currentUrl}&text=${encodeURIComponent(shareText + currentUrl + ' #ContraDance #Twisp')}`,'_blank'); }
        async function shareInstagram() { try { await navigator.clipboard.writeText(shareText + currentUrl); alert('Copied! Paste into IG'); } catch { prompt('Copy:', shareText + currentUrl); } }
        async function shareTikTok() { shareInstagram(); }
    </script>
</body>
</html>
